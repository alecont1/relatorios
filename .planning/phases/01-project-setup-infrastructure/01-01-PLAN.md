---
phase: 01-setup-infrastructure
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/package.json
  - frontend/vite.config.ts
  - frontend/tsconfig.json
  - frontend/tsconfig.app.json
  - frontend/tsconfig.node.json
  - frontend/index.html
  - frontend/src/main.tsx
  - frontend/src/App.tsx
  - frontend/src/app.css
  - frontend/src/stores/appStore.ts
  - frontend/src/lib/queryClient.ts
  - frontend/src/vite-env.d.ts
  - frontend/.env.example
autonomous: true

must_haves:
  truths:
    - "Running npm run dev in frontend/ starts Vite dev server on localhost:5173"
    - "TypeScript compiles without errors (npm run build succeeds)"
    - "Tailwind CSS v4 utility classes render correctly"
    - "Zustand store is accessible from a component"
    - "React Query provider wraps the app"
    - "React Hook Form works in a test form component"
  artifacts:
    - path: "frontend/package.json"
      provides: "Project dependencies and scripts"
      contains: "zustand"
    - path: "frontend/vite.config.ts"
      provides: "Vite build configuration with Tailwind v4 plugin"
      contains: "@tailwindcss/vite"
    - path: "frontend/src/stores/appStore.ts"
      provides: "Zustand global store"
      exports: ["useAppStore"]
    - path: "frontend/src/lib/queryClient.ts"
      provides: "React Query client instance"
      exports: ["queryClient"]
  key_links:
    - from: "frontend/src/main.tsx"
      to: "frontend/src/lib/queryClient.ts"
      via: "QueryClientProvider wrapping App"
      pattern: "QueryClientProvider"
    - from: "frontend/src/main.tsx"
      to: "frontend/src/app.css"
      via: "CSS import with Tailwind directives"
      pattern: "import.*app\\.css"
---

<objective>
Initialize the SmartHand frontend application with React, Vite, TypeScript, Tailwind CSS v4, Zustand, React Query, and React Hook Form.

Purpose: Establish the frontend foundation that all subsequent UI phases will build upon.
Output: A working frontend/ directory with all dependencies configured and a dev server that runs.
</objective>

<execution_context>
@C:\Users\xande\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\xande\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
Research findings (from planning context):
- Tailwind CSS v4: Use @tailwindcss/vite plugin, NOT tailwind.config.js
- Frontend structure: Feature-based modules (features/auth/, features/reports/, etc.)
- Vercel: VITE_ prefixed env vars, base './' for relative paths
- CORS: Use env var for origins

Tech stack: React 18 + Vite 5 + TypeScript 5 + Tailwind CSS v4 + Zustand + React Query v5 + React Hook Form + Zod
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize Vite + React + TypeScript project</name>
  <files>
    frontend/package.json
    frontend/vite.config.ts
    frontend/tsconfig.json
    frontend/tsconfig.app.json
    frontend/tsconfig.node.json
    frontend/index.html
    frontend/.env.example
    frontend/src/vite-env.d.ts
  </files>
  <action>
    Create the frontend/ directory at project root (C:\Users\xande\smarthand-reports\frontend\).

    1. Run `npm create vite@latest frontend -- --template react-ts` from the project root, OR manually create the files:

    2. package.json with:
       - name: "smarthand-frontend"
       - scripts: dev, build, preview, lint, type-check
       - dependencies: react@^18, react-dom@^18, react-router-dom@^6, zustand@^4, @tanstack/react-query@^5, react-hook-form@^7, @hookform/resolvers@^3, zod@^3
       - devDependencies: @vitejs/plugin-react-swc, typescript@^5, @types/react, @types/react-dom, @tailwindcss/vite, tailwindcss@^4, eslint, @eslint/js, typescript-eslint

    3. vite.config.ts:
       - Import tailwindcss from "@tailwindcss/vite"
       - Plugins: [react(), tailwindcss()]
       - Resolve alias: "@" -> "./src"
       - Server port: 5173

    4. tsconfig.json with project references to tsconfig.app.json and tsconfig.node.json
       - Enable strict mode, paths alias "@/*" -> ["./src/*"]

    5. index.html: Standard Vite HTML entry pointing to /src/main.tsx

    6. .env.example with:
       - VITE_API_URL=http://localhost:8000
       - VITE_APP_NAME=SmartHand

    Do NOT use tailwind.config.js - Tailwind v4 uses the Vite plugin and @import "tailwindcss" in CSS.
  </action>
  <verify>
    cd frontend && npm install && npm run build
    Expect: Build completes without errors, dist/ directory created
  </verify>
  <done>Vite dev server starts, TypeScript compiles, Tailwind v4 processes CSS via Vite plugin</done>
</task>

<task type="auto">
  <name>Task 2: Configure state management and data fetching</name>
  <files>
    frontend/src/main.tsx
    frontend/src/App.tsx
    frontend/src/app.css
    frontend/src/stores/appStore.ts
    frontend/src/lib/queryClient.ts
  </files>
  <action>
    1. Create src/app.css with Tailwind v4 import:
       ```css
       @import "tailwindcss";
       ```

    2. Create src/lib/queryClient.ts:
       - Export a QueryClient instance with default options:
         - staleTime: 5 * 60 * 1000 (5 minutes)
         - retry: 1
         - refetchOnWindowFocus: false (for mobile PWA behavior)

    3. Create src/stores/appStore.ts:
       - Zustand store with interface AppState:
         - isOnline: boolean (navigator.onLine)
         - currentTenant: string | null
         - setOnline: (online: boolean) => void
         - setTenant: (tenantId: string | null) => void
       - Export useAppStore hook

    4. Create src/main.tsx:
       - Import app.css
       - Wrap App with QueryClientProvider using the queryClient from lib/queryClient
       - Render to #root with StrictMode

    5. Create src/App.tsx:
       - Simple component that displays "SmartHand" heading
       - Use Tailwind classes (e.g., text-2xl font-bold p-4) to verify Tailwind works
       - Import and display useAppStore().isOnline status to verify Zustand works
       - Include a minimal react-hook-form usage (a text input) to verify RHF works

    This verifies all three libraries are properly configured and working together.
  </action>
  <verify>
    cd frontend && npm run dev (should start without errors)
    npm run build (should compile without TypeScript errors)
    npm run type-check (tsc --noEmit should pass)
  </verify>
  <done>App renders with Tailwind styles, Zustand store is reactive, React Query provider is active, React Hook Form input works</done>
</task>

</tasks>

<verification>
1. `cd frontend && npm install` completes without errors
2. `npm run build` produces dist/ with index.html
3. `npm run dev` starts dev server on port 5173
4. Opening http://localhost:5173 shows "SmartHand" with Tailwind styling
5. No TypeScript errors in build output
</verification>

<success_criteria>
- frontend/package.json exists with all required dependencies
- Vite dev server starts and serves the app
- Tailwind CSS v4 classes are processed (visible styling in browser)
- Zustand store exports useAppStore and state is accessible
- QueryClientProvider wraps the app tree
- TypeScript compilation has zero errors
</success_criteria>

<output>
After completion, create `.planning/phases/01-setup-infrastructure/01-01-SUMMARY.md`
</output>
