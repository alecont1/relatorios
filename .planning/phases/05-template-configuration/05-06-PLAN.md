---
phase: 05-template-configuration
plan: 06
type: execute
wave: 4
depends_on: ["05-04", "05-05"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Admin can add info fields to template and they persist"
    - "Admin can configure checklist field photo settings"
    - "Admin can configure checklist field comment settings"
    - "Admin can add signature fields with role names"
    - "All configuration changes survive page refresh"
    - "UI provides clear feedback on save operations"
  artifacts: []
  key_links: []
---

<objective>
Verify complete template configuration functionality through manual testing. Admin tests all configuration flows end-to-end.

Purpose: Ensure Phase 5 requirements are met before moving to Phase 6 (Report Core).

Output: Human verification of all template configuration features.
</objective>

<execution_context>
@C:\Users\xande\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\xande\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/05-template-configuration/05-04-SUMMARY.md
@.planning/phases/05-template-configuration/05-05-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete template configuration system including:
- Info fields management (add, edit, delete for project metadata)
- Signature fields management (add, edit, delete for report signers)
- Checklist field photo configuration (required, min/max, GPS, watermark)
- Checklist field comment configuration (enabled, required)
- Accordion-based UI for organized configuration sections
  </what-built>
  <how-to-verify>
**Prerequisites:**
1. Start backend: `cd backend && uvicorn app.main:app --reload`
2. Start frontend: `cd frontend && npm run dev`
3. Log in as admin user
4. Navigate to Templates page
5. Select an existing template (or create one via Excel upload first)

**Test 1: Navigate to Configuration**
1. Click "Configure" button on a template
2. Verify page loads with template name/code header
3. Verify three accordion sections visible: Info Fields, Checklist Sections, Signature Fields

**Test 2: Info Fields Management**
1. Expand "Info Fields" accordion (should be open by default)
2. Click "Add Field" button
3. Enter label: "Project Name", type: "text", required: checked
4. Click Save
5. Verify field appears in list
6. Add another field: label: "Project Date", type: "date", required: checked
7. Add select field: label: "Project Status", type: "select", options: "Active, On Hold, Completed"
8. Refresh page - verify all three fields persist
9. Edit "Project Name" label to "Nome do Projeto"
10. Save and verify change persists
11. Delete "Project Status" field
12. Verify deletion persists after refresh

**Test 3: Checklist Field Photo Configuration**
1. Expand "Checklist Sections" accordion
2. Find any checklist field and click on it
3. Verify modal opens with Photo Settings and Comment Settings
4. Configure photo settings:
   - Required: checked
   - Min photos: 1
   - Max photos: 5
   - Require GPS: checked
   - Watermark: checked
5. Click Save
6. Close modal
7. Click same field again - verify settings were saved
8. Refresh page, open modal again - verify settings persist

**Test 4: Checklist Field Comment Configuration**
1. Open field config modal for a different field
2. Configure comment settings:
   - Enabled: checked
   - Required: checked
3. Save and verify persistence

**Test 5: Signature Fields Management**
1. Expand "Signature Fields" accordion
2. Click "Add Signature" button
3. Enter role: "Tecnico Executor", required: checked
4. Add another: role: "Responsavel Tecnico", required: checked
5. Add another: role: "Cliente", required: unchecked
6. Save changes
7. Refresh page - verify all three signatures persist
8. Edit "Cliente" to "Representante do Cliente"
9. Delete "Responsavel Tecnico"
10. Verify changes persist after refresh

**Test 6: Error Handling**
1. Try to save info field with empty label - verify error shown
2. Try photo config with min > max - verify validation prevents save
3. Check network tab for failed requests - verify toast/error feedback

**Expected Results:**
- All CRUD operations work for info fields
- All CRUD operations work for signature fields
- Photo/comment config persists on checklist fields
- UI provides loading states during save
- Errors display clear feedback messages
- Data survives page refresh
  </how-to-verify>
  <resume-signal>Type "approved" to confirm all tests pass, or describe any issues found.</resume-signal>
</task>

</tasks>

<verification>
Human verification covers all Phase 5 requirements:
- TMPL-06: Info fields (text, date, select types) for project metadata
- TMPL-07: Ordered sections containing checklist fields (view only in this phase)
- TMPL-08: Checklist field types (existing from Phase 4)
- TMPL-09: Photo settings (required, min/max, GPS, watermark)
- TMPL-10: Comment settings (enabled, required)
- TMPL-11: Signature fields with role names and required flag
</verification>

<success_criteria>
Human confirms:
- Info fields CRUD works with all field types (text, date, select)
- Signature fields CRUD works with role names and required flag
- Photo config modal saves all settings (required, min/max, GPS, watermark)
- Comment config modal saves enabled/required settings
- All changes persist across page refresh
- UI provides appropriate feedback (loading, success, error states)
</success_criteria>

<output>
After human approval, create `.planning/phases/05-template-configuration/05-06-SUMMARY.md` and update STATE.md to mark Phase 5 complete.
</output>
